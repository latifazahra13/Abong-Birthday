<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Febrian Birthday</title>
    <style>
        /* ================= GLOBAL STYLES ================= */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', Courier, monospace;
        }

        body {
            background: #0f172a;
            color: white;
            overflow: hidden;
        }

        section {
            position: absolute;
            inset: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s ease;
        }

        section.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* ================= TEXT STYLES ================= */
        .big {
            font-size: 60px;
            letter-spacing: 4px;
        }

        .small {
            margin-top: 20px;
            opacity: 0.7;
        }

        .reflection {
            font-size: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1.5s ease;
        }

        .reflection.show {
            opacity: 1;
            transform: translateY(0);
        }

        .line {
            margin: 10px;
            opacity: 0;
            transform: scale(0.95);
            transition: all 1.5s ease;
            font-size: 24px;
        }

        .line.show {
            opacity: 1;
            transform: scale(1);
        }

        #interactionText {
            font-size: 28px;
            font-weight: bold;
            letter-spacing: 2px;
            cursor: pointer;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.6; transform: scale(1); }
        }

        /* ================= TIMER ================= */
        .timer {
            display: flex;
            gap: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .timer > div {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            min-width: 110px;
        }

        .number {
            font-size: 42px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        /* ================= SLIDESHOW ================= */
        .photo-container {
            position: relative;
            width: 300px;
            height: 420px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
            margin: 40px auto 0;
            background: #111827;
        }

        .countdown-photo {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            z-index: 0;
        }

        .countdown-photo.active {
            opacity: 1;
            z-index: 1;
        }

        /* ================= VIDEO ================= */
        iframe {
            width: 80%;
            height: 400px;
            margin-top: 20px;
            transform: scale(0.95);
            transition: all 1.5s ease;
        }

        iframe.show {
            transform: scale(1);
        }

        /* ================= FOOTER ================= */
        .footer-text {
            margin-top: 40px;
            opacity: 0.7;
            max-width: 600px;
            line-height: 1.6;
        }

        /* ================= NEXT BUTTON ================= */
        #nextBtn {
            margin-top: 20px;
            font-size: 20px;
            padding: 10px 20px;
            cursor: pointer;
            border: 2px solid white;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        #nextBtn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>

    <!-- ================= AUDIO ================= -->
    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <!-- ================= SCENES ================= -->
    <!-- Scene 1: Opening Date -->
    <section id="scene1" class="active">
        <div>
            <div id="main" class="big">00 / 00 / 0000</div>
            <div id="sub" class="small"></div>
        </div>
    </section>

    <!-- Scene 2: Reflection Text -->
    <section id="scene2">
        <div id="reflectionText" class="reflection"></div>
    </section>

    <!-- Scene 3: Interaction -->
    <section id="scene3">
        <div id="interactionText">Sentuh Layar</div>
    </section>

    <!-- Scene 4: Message Lines -->
    <section id="scene4">
        <div id="messageContainer"></div>
    </section>

    <!-- Scene 5: Video -->
    <section id="scene5">
        <div>
            <div>Gue buat video, ditonton yaa!! Ini effort banget loh!!</div>
            <iframe id="video" src="https://www.youtube.com/embed/W5GzFwkf58g" frameborder="0" allowfullscreen></iframe>
            <div id="nextBtn">Next</div>
        </div>
    </section>

    <!-- Scene 6: Countdown & Slideshow -->
    <section id="scene6">
        <div>
            <div class="timer">
                <div><div class="number" id="days"></div>Hari</div>
                <div><div class="number" id="hours"></div>Jam</div>
                <div><div class="number" id="minutes"></div>Menit</div>
                <div><div class="number" id="seconds"></div>Detik</div>
            </div>

            <div class="photo-container">
                <img src="1.jpeg" class="countdown-photo active">
                <img src="2.jpeg" class="countdown-photo">
                <img src="3.jpeg" class="countdown-photo">
                <img src="4.jpeg" class="countdown-photo">
            </div>

            <div class="footer-text">
                Sudah sejauh ini, dari 31 Maret 2023. Dan gue masih disini.
                Sekali lagi, selamat ulang tahun Febrian Rizky Anugrah ðŸ’–
            </div>
        </div>
    </section>

    <!-- ================= JAVASCRIPT ================= -->
    <script>
        const birthDate = new Date("2002-02-18");
        const firstMeet = new Date("2023-03-31");
        const today = new Date();
        const music = document.getElementById("bg-music");
        music.volume = 0.5;

        // ===== HELPER FUNCTIONS =====
        function showScene(id) {
            document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
            document.getElementById(id).classList.add("active");
        }

        function countUp(start, end, duration, update, done) {
            let startTime = null;
            function animate(time) {
                if (!startTime) startTime = time;
                let progress = Math.min((time - startTime) / duration, 1);
                let value = Math.floor(progress * (end - start) + start);
                update(value);
                if (progress < 1) requestAnimationFrame(animate);
                else done();
            }
            requestAnimationFrame(animate);
        }

        // ===== SCENE 1: OPENING =====
        function startOpening() {
            const main = document.getElementById("main");
            const sub = document.getElementById("sub");

            setTimeout(() => {
                main.textContent = "18 / 02 / 2026";
                sub.textContent = "Hari ini.";

                setTimeout(() => {
                    let age = today.getFullYear() - birthDate.getFullYear();
                    sub.textContent = "";

                    countUp(0, age, 2000, val => main.textContent = val, () => {
                        sub.textContent = "Lo sudah sejauh ini.";

                        setTimeout(() => {
                            let days = Math.floor((today - firstMeet) / (1000 * 60 * 60 * 24));
                            sub.textContent = "";

                            countUp(0, days, 2000, val => main.textContent = val, () => {
                                sub.textContent = "Dan gue udah nemenin lo selama ini.";
                                setTimeout(() => {
                                    showScene("scene2");
                                    startReflection();
                                }, 5000);
                            });
                        }, 2000);
                    });
                }, 2000);
            }, 1000);
        }

        // ===== SCENE 2: REFLECTION =====
        function startReflection() {
            const reflections = [
                "Jalannya ga selalu mudah. Tapi kita selalu berusaha buat nyoba terus.",
                "Ada hari yang melelahkan. Ada hari yang menyenangkan.",
                "Ntah udah berapa banyak debat yang kita lewatin.",
                "Tapi sampai sekarang, kita masih memilih untuk tinggal."
            ];
            const el = document.getElementById("reflectionText");
            let i = 0;

            function next() {
                if (i < reflections.length) {
                    el.classList.remove("show");
                    setTimeout(() => {
                        el.textContent = reflections[i];
                        el.classList.add("show");
                        i++;
                        setTimeout(next, 4000);
                    }, 1000);
                } else {
                    showScene("scene3");
                    startInteraction();
                }
            }
            next();
        }

        // ===== SCENE 3: INTERACTION =====
        function startInteraction() {
            const el = document.getElementById("interactionText");

            document.body.onclick = function () {
                el.style.animation = "none";
                el.textContent = "Ga perlu hal besar buat memulai, Kadang satu hal kecil aja udah cukup.";
                document.body.onclick = null; // prevent double click

                setTimeout(() => {
                    showScene("scene4");
                    startMessage();
                }, 5000);
            };
        }

        // ===== SCENE 4: MESSAGE =====
        function startMessage() {
            const lines = [
                "24...",
                "Selamat ulang tahun, Febrian Rizky Anugrah.",
                "Terima kasih sudah bertumbuh sejauh ini.",
                "Terima kasih sudah tetap di sini.",
                "Terima kasih sudah kuat dan hebat sampai saat ini.",
                "Gue harap tahun ini lebih ringan buat lo.",
                "Dan gue masih mau jadi bagian dari perjalanan itu.",
                "Love, Ifa."
            ];
            const container = document.getElementById("messageContainer");
            container.innerHTML = ""; // reset container

            let i = 0;

            function next() {
                if (i < lines.length) {
                    const div = document.createElement("div");
                    div.className = "line";
                    div.textContent = lines[i];
                    container.appendChild(div);
                    setTimeout(() => div.classList.add("show"), 100);
                    i++;
                    setTimeout(next, 2000);
                } else {
                    showScene("scene5");
                    startVideo();
                }
            }
            next();
        }

        // ===== SCENE 5: VIDEO =====
        function startVideo() {
            const btn = document.getElementById("nextBtn");
            btn.onclick = function () {
                music.play().catch(() => {});
                showScene("scene6");
                startCountdown();
            };
        }

        // ===== SCENE 6: COUNTDOWN & SLIDESHOW =====
        function startCountdown() {
            const startDate = new Date("2023-03-31T00:00:00");

            function updateCountdown() {
                const now = new Date();
                let diff = now - startDate;
                if (diff < 0) diff = 0;

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((diff / (1000 * 60)) % 60);
                const seconds = Math.floor((diff / 1000) % 60);

                document.getElementById("days").textContent = days;
                document.getElementById("hours").textContent = hours.toString().padStart(2, "0");
                document.getElementById("minutes").textContent = minutes.toString().padStart(2, "0");
                document.getElementById("seconds").textContent = seconds.toString().padStart(2, "0");
            }

            updateCountdown();
            setInterval(updateCountdown, 1000);

            // Slideshow
            const photos = document.querySelectorAll(".countdown-photo");
            let index = 0;
            setInterval(() => {
                photos.forEach(p => p.classList.remove("active"));
                index = (index + 1) % photos.length;
                photos[index].classList.add("active");
            }, 3000);
        }

        // ===== START APP =====
        startOpening();
    </script>
</body>
</html>