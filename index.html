<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Febrian Birthday</title>

<style>
/* =====================================================
   GLOBAL RESET & FONT
===================================================== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Courier New', monospace;
}

body {
  background: #0f172a;
  color: white;
  overflow: hidden;
}

/* =====================================================
   SCENE SYSTEM
===================================================== */
.scene {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 40px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.5s ease;
}

.scene.active {
  opacity: 1;
  pointer-events: auto;
}

/* =====================================================
   TEXT STYLES
===================================================== */
.big {
  font-size: 60px;
  letter-spacing: 4px;
}

.small {
  margin-top: 20px;
  opacity: 0.7;
}

.reflection {
  font-size: 30px;
  opacity: 0;
  transform: translateY(20px);
  transition: 1.5s;
}

.reflection.show {
  opacity: 1;
  transform: translateY(0);
}

.line {
  margin: 10px;
  font-size: 24px;
  opacity: 0;
  transform: scale(0.95);
  transition: 1.2s;
}

.line.show {
  opacity: 1;
  transform: scale(1);
}

#interactionText {
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%   { opacity: 0.6; transform: scale(1); }
  50%  { opacity: 1;   transform: scale(1.05); }
  100% { opacity: 0.6; transform: scale(1); }
}

/* =====================================================
   VIDEO SECTION
===================================================== */
.video-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 25px;
}

iframe {
  width: 80%;
  height: 400px;
  border-radius: 15px;
}

#nextBtn,
#nextVideoBtn {
  padding: 10px 25px;
  border: 2px solid white;
  border-radius: 10px;
  cursor: pointer;
  background: transparent;
  color: white;
  transition: 0.3s;
}

#nextBtn:hover,
#nextVideoBtn:hover {
  background: white;
  color: #0f172a;
}

/* =====================================================
   TIMER / COUNTDOWN
===================================================== */
.timer {
  display: flex;
  gap: 25px;
  flex-wrap: wrap;
  justify-content: center;
}

.timer > div {
  background: rgba(255,255,255,0.05);
  padding: 20px;
  border-radius: 15px;
  min-width: 100px;
}

.number {
  font-size: 42px;
  font-weight: bold;
}

/* =====================================================
   PHOTO CONTAINER
===================================================== */
.photo-container {
  position: relative;
  width: 300px;
  height: 420px;
  margin: 40px auto;
  border-radius: 20px;
  overflow: hidden;
}

.countdown-photo {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: 1s;
}

.countdown-photo.active {
  opacity: 1;
}

.footer-text {
  max-width: 600px;
  margin-top: 30px;
  opacity: 0.7;
  line-height: 1.6;
}

/* =====================================================
   OPENING BUTTON
===================================================== */
#openNextBtn button {
  padding: 10px 25px;
  font-size: 20px;
  border-radius: 10px;
  cursor: pointer;
  border: 2px solid white;
  background: transparent;
  color: white;
  transition: 0.3s;
}

#openNextBtn button:hover {
  background: white;
  color: #0f172a;
}

/* =====================================================
   MEDIA QUERIES (MOBILE)
===================================================== */
@media (max-width: 768px) {
  .big { font-size: 36px; }
  .reflection { font-size: 20px; }
  .line { font-size: 18px; }
  #interactionText { font-size: 20px; }
  iframe { width: 100%; height: 220px; }
  .photo-container { width: 220px; height: 320px; }
  .number { font-size: 28px; }
}
</style>
</head>
<body>

<!-- AUDIO -->
<audio id="bg-music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<!-- =====================================================
   SCENES
===================================================== -->

<!-- Scene 0: Opening -->
<section id="scene0" class="scene active">
  <div>
    <div class="big">Hai, Febrian Rizky Anugrah!</div>
    <div id="openNextBtn" style="margin-top:30px;">
      <button>Hai Ifa</button>
    </div>
  </div>
</section>

<!-- Scene 1: Tanggal & Countup -->
<section id="scene1" class="scene">
  <div>
    <div id="main" class="big">00 / 00 / 0000</div>
    <div id="sub" class="small"></div>
  </div>
</section>

<!-- Scene 2: Reflection -->
<section id="scene2" class="scene">
  <div id="reflectionText" class="reflection"></div>
</section>

<!-- Scene 3: Interaction -->
<section id="scene3" class="scene">
  <div id="interactionText">Sentuh Layar</div>
</section>

<!-- Scene 4: Messages -->
<section id="scene4" class="scene">
  <div id="messageContainer"></div>
</section>

<!-- Scene 5: Video + Tombol "Next" -->
<section id="scene5" class="scene">
  <div class="video-wrapper">
    <div>Gue buat video, ditonton yaa!! Ini effort loh gue ngeditnya!!</div>
    <iframe id="videoFrame" src="" allow="autoplay" allowfullscreen></iframe>
    <div id="nextBtn">Next</div>
  </div>
</section>

<!-- Scene 6: Countdown + Photos -->
<section id="scene6" class="scene">
  <div>
    <div class="timer">
      <div><div class="number" id="days"></div>Hari</div>
      <div><div class="number" id="hours"></div>Jam</div>
      <div><div class="number" id="minutes"></div>Menit</div>
      <div><div class="number" id="seconds"></div>Detik</div>
    </div>

    <div class="photo-container">
      <img src="1.jpeg" class="countdown-photo active">
      <img src="2.jpeg" class="countdown-photo">
      <img src="3.jpeg" class="countdown-photo">
      <img src="4.jpeg" class="countdown-photo">
      <img src="5.jpeg" class="countdown-photo">
      <img src="6.jpeg" class="countdown-photo">
      <img src="7.jpeg" class="countdown-photo">
    </div>

    <div class="footer-text">
      Sudah sejauh ini, dari 31 Maret 2023. Dan gue masih disini.
      Sekali lagi, selamat ulang tahun Febrian Rizky Anugrah ðŸ’–
    </div>
  </div>
</section>

<!-- =====================================================
   YOUTUBE IFRAME API + JS
===================================================== -->
<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* =====================================================
   DATA & INIT
===================================================== */
const birthDate = new Date("2002-02-18");
const firstMeet = new Date("2023-03-31");
const today = new Date();
const music = document.getElementById("bg-music");
music.volume = 0.5;
let player;

/* =====================================================
   AUTOPLAY MUSIC
===================================================== */
music.play().catch(()=>{}); // autoplay saat load

/* =====================================================
   SCENE UTILITIES
===================================================== */
function showScene(id){
  document.querySelectorAll(".scene").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function countUp(start,end,duration,update,done){
  let startTime=null;
  function animate(time){
    if(!startTime) startTime=time;
    let progress=Math.min((time-startTime)/duration,1);
    let value=Math.floor(progress*(end-start)+start);
    update(value);
    if(progress<1) requestAnimationFrame(animate);
    else done();
  }
  requestAnimationFrame(animate);
}

/* =====================================================
   SCENE 0: OPENING
===================================================== */
document.querySelector("#openNextBtn button").onclick = function(){
  showScene("scene1");
  setTimeout(() => { startOpening(); }, 3000);
};

/* =====================================================
   SCENE 1: TANGGAL & COUNTUP
===================================================== */
function startOpening(){
  const main=document.getElementById("main");
  const sub=document.getElementById("sub");

  setTimeout(()=>{
    main.textContent="18 / 02 / 2026";
    sub.textContent="Hari ini.";

    setTimeout(()=>{
      let age = today.getFullYear() - birthDate.getFullYear();
      sub.textContent="";
      countUp(0,age,2000,val=>main.textContent=val,()=>{
        sub.textContent="Lo sudah sejauh ini.";
        setTimeout(()=>{
          let days=Math.floor((today-firstMeet)/(1000*60*60*24));
          sub.textContent="";
          countUp(0,days,2000,val=>main.textContent=val,()=>{
            sub.textContent="Dan gue udah nemenin lo selama ini.";
            setTimeout(()=>{ showScene("scene2"); startReflection(); },5000);
          });
        },2000);
      });
    },2000);
  },1000);
}

/* =====================================================
   SCENE 2: REFLECTION
===================================================== */
function startReflection(){
  const reflections=[
    "Jalannya ga selalu mudah. Tapi kita selalu berusaha buat nyoba terus.",
    "Ada hari yang melelahkan. Ada hari yang menyenangkan.",
    "Ntah udah berapa banyak debat yang kita lewatin.",
    "Tapi sampai sekarang, kita masih milih untuk tinggal."
  ];
  const el=document.getElementById("reflectionText");
  let i=0;
  function next(){
    if(i<reflections.length){
      el.classList.remove("show");
      setTimeout(()=>{
        el.textContent=reflections[i];
        el.classList.add("show");
        i++;
        setTimeout(next,4000);
      },1000);
    } else {
      showScene("scene3");
      startInteraction();
    }
  }
  next();
}

/* =====================================================
   SCENE 3: INTERACTION
===================================================== */
function startInteraction(){
  const el=document.getElementById("interactionText");
  document.body.onclick=function(){
    el.style.animation="none";
    el.textContent="Ga perlu hal besar buat memulai, Kadang satu hal kecil aja udah cukup.";
    document.body.onclick=null;
    setTimeout(()=>{ showScene("scene4"); startMessage(); },5000);
  };
}

/* =====================================================
   SCENE 4: MESSAGES
===================================================== */
function startMessage(){
  const lines=[
    "24...",
    "Selamat ulang tahun, Febrian Rizky Anugrah.",
    "Terima kasih sudah bertumbuh sejauh ini.",
    "Terima kasih sudah tetap di sini.",
    "Terima kasih sudah kuat dan hebat sampai saat ini.",
    "Gue harap tahun ini lebih ringan buat lo.",
    "Dan gue masih mau jadi bagian dari perjalanan itu.",
    "Love, Ifa."
  ];
  const container=document.getElementById("messageContainer");
  container.innerHTML="";
  let i=0;
  function next(){
    if(i<lines.length){
      const div=document.createElement("div");
      div.className="line";
      div.textContent=lines[i];
      container.appendChild(div);
      setTimeout(()=>div.classList.add("show"),100);
      i++;
      setTimeout(next,2000);
    } else {
      showScene("scene5");
      startVideo();
    }
  }
  next();
}

/* =====================================================
   SCENE 5: VIDEO
===================================================== */
const ytFrame = document.getElementById("videoFrame");
ytFrame.src = `https://www.youtube.com/embed/W5GzFwkf58g?enablejsapi=1&origin=${window.location.origin}`;

function onYouTubeIframeAPIReady(){
  player = new YT.Player("videoFrame", {
    events:{
      onReady:()=>console.log("YT Player ready"),
      onStateChange: onPlayerStateChange
    }
  });
}

function onPlayerStateChange(event){
  if(event.data === YT.PlayerState.PLAYING){
    music.pause();
  }
  if(event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED){
    music.play().catch(()=>{});
  }
}

// Tombol "Hai Ifa" â†’ lanjut ke countdown, video tetap jalan
document.getElementById("nextBtn").onclick = function(){
  showScene("scene6");
  startCountdown();
  music.play().catch(()=>{});
};

/* =====================================================
   SCENE 6: COUNTDOWN + PHOTOS
===================================================== */
function startCountdown(){
  const startDate=new Date("2023-03-31T00:00:00");

  function update(){
    const now = new Date();
    let diff = now - startDate;
    if(diff<0) diff=0;
    const days=Math.floor(diff/(1000*60*60*24));
    const hours=Math.floor((diff/(1000*60*60))%24);
    const minutes=Math.floor((diff/(1000*60))%60);
    const seconds=Math.floor((diff/1000)%60);

    document.getElementById("days").textContent=days;
    document.getElementById("hours").textContent=hours.toString().padStart(2,"0");
    document.getElementById("minutes").textContent=minutes.toString().padStart(2,"0");
    document.getElementById("seconds").textContent=seconds.toString().padStart(2,"0");
  }

  update();
  setInterval(update,1000);

  const photos = document.querySelectorAll(".countdown-photo");
  let index=0;
  setInterval(()=>{
    photos.forEach(p=>p.classList.remove("active"));
    index=(index+1)%photos.length;
    photos[index].classList.add("active");
  },3000);
}

/* =====================================================
   Tombol "Next" (opsional) â†’ pause video, musik jalan
===================================================== */
const nextVideoBtn = document.getElementById("nextVideoBtn");
if(nextVideoBtn){
  nextVideoBtn.onclick = function(){
    if(player && typeof player.pauseVideo === "function"){
      player.pauseVideo();
    }
    music.play().catch(()=>{});
    showScene("scene6");
    startCountdown();
  };
}
</script>
</body>

</html>
